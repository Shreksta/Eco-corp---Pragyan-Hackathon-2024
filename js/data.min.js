/*!
 * Start Bootstrap - ML CO2 Impact v5.0.8 ()
 * Copyright 2013-2023 
 * Licensed under MIT (https://github.com/BlackrockDigital/ml-co2-impact/blob/master/LICENSE)
 */

"use strict";var dev_base_data_url="https://raw.githubusercontent.com/mlco2/impact/master/data/",prod_base_data_url="https://raw.githubusercontent.com/mlco2/impact/master/data/",serveFrom="dev";const parseProvidersData=t=>{var a={};for(const m of t){var{provider:r,region:e,country:o,state:s,city:c,source:i,comment:n,providerName:p,offsetRatio:u}=m,d=parseInt(m.impact,10);let t=m["regionName"];t=t||e,r in a||(a[r]={__min:{impact:1e4,region:""}}),d<a[r].__min.impact&&(a[r].__min={region:e,impact:d}),a[r][e]={regionName:t,country:o,state:s,city:c,source:i,comment:n,providerName:p,offsetRatio:u,impact:parseFloat(d)}}return a},parseGPUData=t=>{var a={};let r=1e6;for(const s of t){var e=s.name,o=s.tdp_watts;a[e]={watt:parseFloat(o)},parseFloat(o)<r&&(r=parseFloat(o))}return a};async function getProvidersData(){let a;try{return a=await $.ajax({type:"GET",url:prod_base_data_url+"impact.csv",dataType:"text"}),serveFrom="prod",a}catch(t){try{return a=await $.ajax({type:"GET",url:dev_base_data_url+"impact.csv",dataType:"text"})}catch(t){console.log("Error getting providers:"),console.error(t)}}}async function getGPUData(){let a;try{return a=await $.ajax({type:"GET",url:prod_base_data_url+"gpus.csv",dataType:"text"})}catch(t){try{return a=await $.ajax({type:"GET",url:dev_base_data_url+"gpus.csv",dataType:"text"})}catch(t){console.log("Error getting providers:"),console.error(t)}}}async function getData(){var t=await getProvidersData(),a=await getGPUData();return{providers:parseProvidersData($.csv.toObjects(t)),gpus:parseGPUData($.csv.toObjects(a))}}